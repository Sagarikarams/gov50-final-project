---
title: "Exploring USA Bureau of Labor Statistics"
author: "Sagarika Ramesh"
description: "Exploring how the inflation has affected different industries, unemployment and wage growth"
output:
  distill::distill_article:
    self_contained: false
---



## Project thoughts
I want to explore the USA Bureau of Labor Statistics (BLS) data. I will be analyzing different trends and patterns that exist in the data. Is inflation increasing faster than wage growth? If it is true, it would be difficult for lower-income households to meet their daily needs. The number of working hours, marital status, race, gender, labor productivity, and other factors could affect wage growth. We can also inspect how the COVID-19 pandemic has affected wage growth. The Consumer Price Index (CPI) is a statistical measure of change, over time, of the prices of goods and services in major expenditure groups(such as food, housing, apparel, transportation, and medical care)typically purchased by urban consumers. The Current Employment Statistics (CES) program produces detailed industry estimates of non-farm employment, hours, and earnings of workers on the payroll. 
My hypothesis is inflation is increasing faster than wage growth. The prices of most of the items have increased. We always hear people complain about how their spending power has decreased significantly. We can now check if it is true. 
Dataset is obtained from  https://www.bls.gov/cpi/ and https://www.bls.gov/ces/
My sample consists of revised seasonally adjusted Consumer Price Index and factors for All Urban Consumers during 2017-2021, average weekly earnings of all employees in different industries, and the cities in which they reside. My outcome variable measures wage growth. The monthly changes in the prices and wages are measured. This is used to calculate inflation and wage growth. I will use a regression analysis to examine the relationship between these two variables. A negative relationship between the two variables shows that they are not positively correlated, which means wages are not increasing with the increase in inflation.
Hence a negative relationship between the two variables would provide support for my hypothesis, and a positive relationship between the two variables would disprove my hypothesis.

```{r}
library(blscrapeR)
library(dplyr)
library(tidyverse)
```


```{r}
library(lubridate)

food_cpi <- read.csv("data/CUSR0000SAF11.csv")
food_cpi$Date <- ymd(food_cpi$DATE) 
food_cpi <- food_cpi|>
            rename("Index" = CUSR0000SAF11)|>
            select(Date, Index)

glimpse(food_cpi)
tail(food_cpi)
```


```{r}
library(ggplot2)

ggplot(food_cpi, aes(x = Date, y = Index)) + geom_line()+labs(title = "CPI for All Urban Consumers: Food, over 10 years")
```
```{r}
medical_services_cpi <- read.csv("data/CUSR0000SAM2.csv")

medical_services_cpi$Date <- ymd(medical_services_cpi$DATE) 
medical_services_cpi <- medical_services_cpi|>
            rename("Index" = CUSR0000SAM2)|>
            select(Date, Index)

glimpse(medical_services_cpi)
tail(medical_services_cpi)
```
```{r}

ggplot(medical_services_cpi, aes(x = Date, y = Index)) + geom_line() + labs(title = "CPI for All Urban Consumers: Medical Care Services, over 10 years")
```

```{r}
shelter_cpi <- read.csv("data/CUSR0000SAS2RS.csv")

shelter_cpi$Date <- ymd(shelter_cpi$DATE) 
shelter_cpi <- shelter_cpi|>
            rename("Index" = CUSR0000SAS2RS)|>
            select(Date, Index)

glimpse(shelter_cpi)
tail(shelter_cpi)
```

```{r}
ggplot(shelter_cpi, aes(x = Date, y = Index)) + geom_line() + labs(title = "CPI for All Urban Consumers: Rent of Shelter, over 10 years")
```

```{r}
gasoline_cpi <- read.csv("data/CUSR0000SETB01.csv")

gasoline_cpi$Date <- ymd(gasoline_cpi$DATE) 
gasoline_cpi <- gasoline_cpi|>
            rename("Index" = CUSR0000SETB01)|>
            select(Date, Index)

glimpse(gasoline_cpi)
tail(gasoline_cpi)
```
```{r}
ggplot(gasoline_cpi, aes(x = Date, y = Index)) + geom_line() +labs(title = "CPI for All Urban Consumers: Gasoline, over 10 years")
```


```{r}
totalwage_weekly <- read.csv("data/LES1252881500Q.csv")

totalwage_weekly$Date <- ymd(totalwage_weekly$DATE) 
totalwage_weekly <- totalwage_weekly|>
            rename("tt_wk_wage" = LES1252881500Q)|>
            select(Date, tt_wk_wage)

glimpse(totalwage_weekly)
tail(totalwage_weekly)
```
```{r}
ggplot(totalwage_weekly, aes(x = Date, y = tt_wk_wage)) + geom_line() + labs(x = "Date", y = "Dollars",title = "Median weekly earnings over 10 years for ages 16 and above")
```

```{r}
menwage_weekly <- read.csv("data/LES1252881800Q.csv")

menwage_weekly$Date <- ymd(menwage_weekly$DATE) 
menwage_weekly <- menwage_weekly|>
            rename("men_wk_wage" = LES1252881800Q)|>
            select(Date, men_wk_wage)

glimpse(menwage_weekly)
tail(menwage_weekly)
```
```{r}
ggplot(menwage_weekly, aes(x = Date, y = men_wk_wage)) + geom_line()+ labs(x = "Date", y = "Dollars", title = "Median weekly earnings over 10 years for men of ages 16 and above")
```

```{r}
womenwage_weekly <- read.csv("data/LES1252882700Q.csv")

womenwage_weekly$Date <- ymd(womenwage_weekly$DATE) 
womenwage_weekly <- womenwage_weekly|>
            rename("women_wk_wage" = LES1252882700Q)|>
            select(Date, women_wk_wage)

glimpse(womenwage_weekly)
tail(womenwage_weekly)
```

```{r}
ggplot(womenwage_weekly, aes(x = Date, y = women_wk_wage)) + geom_line() + labs(x = "Date", y = "Dollars", title = "Median weekly earnings over 10 years for women of ages 16 and above")
```
```{r}
wages <- totalwage_weekly |>
  left_join(menwage_weekly, by = 'Date')

wages <- wages |>
        left_join(womenwage_weekly, by = 'Date')
wages
```

```{r}
ggplot(wages, aes(x = men_wk_wage, y = women_wk_wage)) +
geom_point(color = "steelblue1") +
labs(
  x = "Median weekly earnings by Men",
  y = "Median weekly earnings by Women",
  title = "Median weekly earnings by Men vs Women") + 
  scale_x_continuous(labels = scales::dollar, 
                        limits = c(690, 1200),
                 breaks = c(600, 700, 800, 900, 1000, 1100, 1200)) +
  scale_y_continuous(labels = scales::dollar, 
                     limits = c(690, 1200),
                 breaks = c(600, 700, 800, 900, 1000, 1100, 1200))
```

